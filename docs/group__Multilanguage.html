<!-- HTML header for doxygen 1.8.12-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.12"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>PhpBotFramework: Multilanguage</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="PhpBotFramework_Logo_small.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">PhpBotFramework
   &#160;<span id="projectnumber">1.0.0</span>
   </div>
   <div id="projectbrief">A framework for Telegram Bots&#39; APIs.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-84714824-4', 'auto');
  ga('send', 'pageview');
</script>
<!-- Generated by Doxygen 1.8.12 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">Multilanguage</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gaed4ac30d321473c476a1e8fac00afac1"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Multilanguage.html#gaed4ac30d321473c476a1e8fac00afac1">DanySpin97\PhpBotFramework\Bot::getLanguageDatabase</a> ($default_language='en')</td></tr>
<tr class="memdesc:gaed4ac30d321473c476a1e8fac00afac1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get current user language from the database, and set it in $language.  <a href="#gaed4ac30d321473c476a1e8fac00afac1">More...</a><br /></td></tr>
<tr class="separator:gaed4ac30d321473c476a1e8fac00afac1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gadd3df874a2cca3205e3e84d35c41187b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Multilanguage.html#gadd3df874a2cca3205e3e84d35c41187b">DanySpin97\PhpBotFramework\Bot::getLanguageRedis</a> ($default_language='en')</td></tr>
<tr class="memdesc:gadd3df874a2cca3205e3e84d35c41187b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get current user language from redis, and set it in language.  <a href="#gadd3df874a2cca3205e3e84d35c41187b">More...</a><br /></td></tr>
<tr class="separator:gadd3df874a2cca3205e3e84d35c41187b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab3690275342ad2f6fbcbe7a9c03f5ab8"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Multilanguage.html#gab3690275342ad2f6fbcbe7a9c03f5ab8">DanySpin97\PhpBotFramework\Bot::getLanguageRedisAsCache</a> ($default_language='en', $expiring_time='86400')</td></tr>
<tr class="memdesc:gab3690275342ad2f6fbcbe7a9c03f5ab8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get current user language from redis, as a cache, and set it in language.  <a href="#gab3690275342ad2f6fbcbe7a9c03f5ab8">More...</a><br /></td></tr>
<tr class="separator:gab3690275342ad2f6fbcbe7a9c03f5ab8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga64ed17b2a28fd265bd7da9c48bdf8d9e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Multilanguage.html#ga64ed17b2a28fd265bd7da9c48bdf8d9e">DanySpin97\PhpBotFramework\Bot::setLanguageRedisAsCache</a> ($language, $expiring_time='86400')</td></tr>
<tr class="memdesc:ga64ed17b2a28fd265bd7da9c48bdf8d9e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the current user language in both redis, sql database and $language.  <a href="#ga64ed17b2a28fd265bd7da9c48bdf8d9e">More...</a><br /></td></tr>
<tr class="separator:ga64ed17b2a28fd265bd7da9c48bdf8d9e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga87b10c818efdd660cb4a4047e02bff24"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Multilanguage.html#ga87b10c818efdd660cb4a4047e02bff24">DanySpin97\PhpBotFramework\Bot::loadLocalization</a> ($dir='./localization')</td></tr>
<tr class="memdesc:ga87b10c818efdd660cb4a4047e02bff24"><td class="mdescLeft">&#160;</td><td class="mdescRight">Load localization files (JSON-serialized) from a folder and set them in $local variable.  <a href="#ga87b10c818efdd660cb4a4047e02bff24">More...</a><br /></td></tr>
<tr class="separator:ga87b10c818efdd660cb4a4047e02bff24"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:gae8396ba4996f53cc66ca337c23a32f82"><td class="memItemLeft" align="right" valign="top"><a id="gae8396ba4996f53cc66ca337c23a32f82"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Multilanguage.html#gae8396ba4996f53cc66ca337c23a32f82">DanySpin97\PhpBotFramework\Bot::$language</a></td></tr>
<tr class="memdesc:gae8396ba4996f53cc66ca337c23a32f82"><td class="mdescLeft">&#160;</td><td class="mdescRight">Store the language for a multi-language bot. <br /></td></tr>
<tr class="separator:gae8396ba4996f53cc66ca337c23a32f82"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab1d8b5e58580e86b971d53a39640c47d"><td class="memItemLeft" align="right" valign="top"><a id="gab1d8b5e58580e86b971d53a39640c47d"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Multilanguage.html#gab1d8b5e58580e86b971d53a39640c47d">DanySpin97\PhpBotFramework\Bot::$local</a></td></tr>
<tr class="memdesc:gab1d8b5e58580e86b971d53a39640c47d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Store localization data. <br /></td></tr>
<tr class="separator:gab1d8b5e58580e86b971d53a39640c47d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad3ac11c80d6956181f1dd04bb9f0f36b"><td class="memItemLeft" align="right" valign="top"><a id="gad3ac11c80d6956181f1dd04bb9f0f36b"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Multilanguage.html#gad3ac11c80d6956181f1dd04bb9f0f36b">DanySpin97\PhpBotFramework\Bot::$user_table</a> = '&quot;User&quot;'</td></tr>
<tr class="memdesc:gad3ac11c80d6956181f1dd04bb9f0f36b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Table contaning bot users data in the sql database. <br /></td></tr>
<tr class="separator:gad3ac11c80d6956181f1dd04bb9f0f36b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gadcc8b44f3a52ab4f353edcfb7f90a085"><td class="memItemLeft" align="right" valign="top"><a id="gadcc8b44f3a52ab4f353edcfb7f90a085"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Multilanguage.html#gadcc8b44f3a52ab4f353edcfb7f90a085">DanySpin97\PhpBotFramework\Bot::$id_column</a> = 'chat_id'</td></tr>
<tr class="memdesc:gadcc8b44f3a52ab4f353edcfb7f90a085"><td class="mdescLeft">&#160;</td><td class="mdescRight">Name of the column that represents the user id in the sql database. <br /></td></tr>
<tr class="separator:gadcc8b44f3a52ab4f353edcfb7f90a085"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<h2 class="groupheader">Function Documentation</h2>
<a id="gaed4ac30d321473c476a1e8fac00afac1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaed4ac30d321473c476a1e8fac00afac1">&sect;&nbsp;</a></span>getLanguageDatabase()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DanySpin97\PhpBotFramework\Bot::getLanguageDatabase </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$default_language</em> = <code>'en'</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get current user language from the database, and set it in $language. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">$default_language</td><td><em>Optional</em>. Default language to return in case of errors. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Language set for the current user, $default_language on errors. </dd></dl>

</div>
</div>
<a id="gadd3df874a2cca3205e3e84d35c41187b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gadd3df874a2cca3205e3e84d35c41187b">&sect;&nbsp;</a></span>getLanguageRedis()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DanySpin97\PhpBotFramework\Bot::getLanguageRedis </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$default_language</em> = <code>'en'</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get current user language from redis, and set it in language. </p>
<p>Using redis database we get language stored and the value does not expires. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">$default_language</td><td><em>Optional</em>. Default language to return in case of errors. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Language for the current user, $default_language on errors. </dd></dl>

</div>
</div>
<a id="gab3690275342ad2f6fbcbe7a9c03f5ab8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab3690275342ad2f6fbcbe7a9c03f5ab8">&sect;&nbsp;</a></span>getLanguageRedisAsCache()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DanySpin97\PhpBotFramework\Bot::getLanguageRedisAsCache </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$default_language</em> = <code>'en'</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$expiring_time</em> = <code>'86400'</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get current user language from redis, as a cache, and set it in language. </p>
<p>Using redis database as cache, seeks the language in it, if there isn't then get the language from the sql database and store it (with default expiring of one day) in redis. It also change $language parameter of the bot to the language returned. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">$default_language</td><td><em>Optional</em>. Default language to return in case of errors. </td></tr>
    <tr><td class="paramname">$expiring_time</td><td><em>Optional</em>. Set the expiring time for the language on redis each time it is took from the sql database. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Language for the current user, $default_language on errors. </dd></dl>

</div>
</div>
<a id="ga87b10c818efdd660cb4a4047e02bff24"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga87b10c818efdd660cb4a4047e02bff24">&sect;&nbsp;</a></span>loadLocalization()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DanySpin97\PhpBotFramework\Bot::loadLocalization </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$dir</em> = <code>'./localization'</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Load localization files (JSON-serialized) from a folder and set them in $local variable. </p>
<p>Save all localization files, saved as json format, from a directory and put the contents in $local variable. Each file will be saved into $local with the first two letters of the filename as the index. Access the english data as $this-&gt;local["en"]["Your key"]. File <code>./localization/en.json</code>: </p><pre class="fragment">{"Hello_Msg": "Hello"}
</pre><p>File <code>./localization/it.json</code>: </p><pre class="fragment">{"Hello_Msg": "Ciao"}
</pre><p>Usage in <code><a class="el" href="group__Bot.html#gad9e60bdc381210c76cf8bcd609c71ad4" title="Called every message received by the bot. ">processMessage()</a></code>: </p><pre class="fragment">$sendMessage($this-&gt;local[$this-&gt;language]["Hello_Msg"]);
</pre><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">$dir</td><td>Directory where the localization files are saved. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga64ed17b2a28fd265bd7da9c48bdf8d9e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga64ed17b2a28fd265bd7da9c48bdf8d9e">&sect;&nbsp;</a></span>setLanguageRedisAsCache()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DanySpin97\PhpBotFramework\Bot::setLanguageRedisAsCache </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$language</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$expiring_time</em> = <code>'86400'</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the current user language in both redis, sql database and $language. </p>
<p>Save it on database first, then create the expiring key on redis. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">$language</td><td>The new language to set. </td></tr>
    <tr><td class="paramname">$expiring_time</td><td><em>Optional</em>. Time for the language key in redis to expire. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>On sucess, return true, throw exception otherwise. </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.12
</small></address>
</body>
</html>
